C51 COMPILER V9.01   LCD1602                                                               12/06/2023 12:06:34 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\LCD1602.obj
COMPILER INVOKED BY: D:\Program Files\Keil\C51\BIN\C51.EXE ..\eide\src\utils\LCD1602.c BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\LCD1602.lst) OBJECT(.\LCD1602.obj)

line level    source

   1          #include "LCD1602.h"
   2          
   3          // 向LCD写入一个字节
   4          void __writeComOnLCD1602(unsigned char com)     {       //写入命令
   5   1              LCD1602_E = 0;  //使能
   6   1              LCD1602_RS = 0; //选择发送命令
   7   1              LCD1602_RW = 0; //选择写入
   8   1              
   9   1              LCD1602_DATAPINS = com; //放入命令
  10   1              delayOneMillisecond(1); //等待数据稳定
  11   1      
  12   1              LCD1602_E = 1;  //写入时序
  13   1              delayOneMillisecond(5); //保持时间
  14   1              LCD1602_E = 0;
  15   1      }
  16          
  17          // 向LCD写入一个字节的数据
  18          void __writeDataOnLCD1602(unsigned char dat) {  //写入数据
  19   1              LCD1602_E = 0;  //使能清零
  20   1              LCD1602_RS = 1; //选择输入数据
  21   1              LCD1602_RW = 0; //选择写入
  22   1      
  23   1              LCD1602_DATAPINS = dat; //写入数据
  24   1              delayOneMillisecond(1);
  25   1      
  26   1              LCD1602_E = 1;  //写入时序
  27   1              delayOneMillisecond(5); //保持时间
  28   1              LCD1602_E = 0;
  29   1      }
  30          
  31          // 初始化LCD1602
  32          void initializeLCD1602(void) {  //LCD初始化子程序
  33   1              __writeComOnLCD1602(0x38);      //开显示
  34   1              __writeComOnLCD1602(0x0c);      //开显示不显示光标
  35   1              __writeComOnLCD1602(0x06);      //写一个指针加1
  36   1              __writeComOnLCD1602(0x01);      //清屏
  37   1              __writeComOnLCD1602(0x80);      //设置数据指针起点
  38   1      }
  39          
  40          // 清除第0或第1行的数据
  41          void clearLineInLCD1602(unsigned char row) {
  42   1          unsigned char i;
  43   1          __writeComOnLCD1602(((row & 1) << 6) | 0x80);
  44   1          for(i=0; i<LineLength; i++) __writeDataOnLCD1602(' ');
  45   1      }
  46          
  47          // 写一个字符
  48          // row: 行(0或1),  column: 第几个字符(0~15),  dat: 要写的字符.
  49          void writeCharOnLCD1602(unsigned char row, unsigned char column, unsigned char dat) {
  50   1          __writeComOnLCD1602((((row & 1) << 6) + column) | 0x80);
  51   1          __writeDataOnLCD1602(dat);
  52   1      }
  53          
  54          // 写一个字符串
C51 COMPILER V9.01   LCD1602                                                               12/06/2023 12:06:34 PAGE 2   

  55          // row: 行(0或1),  column: 第几个字符(0~15),  puts: 要写的字符串指针.
  56          void putStringOnLCD1602(unsigned char row, unsigned char column, unsigned char *puts) {
  57   1          __writeComOnLCD1602((((row & 1) << 6) + column) | 0x80);
  58   1          for (; *puts != 0; puts++) {        //遇到停止符0结束
  59   2              __writeDataOnLCD1602(*puts);
  60   2              if(++column >= LineLength) break;
  61   2          }
  62   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    192    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
