C51 COMPILER V9.01   MAINSCREEN                                                            12/06/2023 12:06:33 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAINSCREEN
OBJECT MODULE PLACED IN .\mainScreen.obj
COMPILER INVOKED BY: D:\Program Files\Keil\C51\BIN\C51.EXE ..\eide\src\screens\mainScreen.c BROWSE DEBUG OBJECTEXTEND PR
                    -INT(.\mainScreen.lst) OBJECT(.\mainScreen.obj)

line level    source

   1          #include "mainScreen.h"
   2          
   3          // 主屏幕
   4          void mainScreen() {
   5   1          int temp = 0;
   6   1              
   7   1              // 处理存储的最高/最低温度
   8   1          prepareReadTemperature(readAT24C02(0x00), onScreenHighestTemperature, &highestTemperature);
   9   1          prepareReadTemperature(readAT24C02(0x01), onScreenLowestTemperature, &lowestTemperature);
  10   1          // 处理当前温度
  11   1          getTemperatureOfDS18B20(onScreenCurrentTemperature, &currentTemperature);
  12   1          // 处理风扇档位
  13   1          *onScreenFanLevel = (unsigned char)('0' + fanLevel);
  14   1          
  15   1          // 如果当前温度小于最低温度，则LED灯亮
  16   1          LED = !(currentTemperature < lowestTemperature);
  17   1          // 如果当前温度超过最高温度或低于最低温度，则蜂鸣器响
  18   1          // BEEP = ((currentTemperature <= highestTemperature) && (currentTemperature >= lowestTemperature));
  19   1          // 每超过最高温度2度，风扇等级增加一级，最高三级
  20   1          temp = currentTemperature - highestTemperature;
  21   1          if (temp >= 6) {
  22   2              fanLevel = 3;
  23   2              fanState[0] = 1;
  24   2              fanState[1] = 1;
  25   2              fanState[2] = 1;
  26   2              fanState[3] = 1;
  27   2          } else if (temp >= 4) {
  28   2              fanLevel = 2;
  29   2              fanState[0] = 1;
  30   2              fanState[1] = 1;
  31   2              fanState[2] = 1;
  32   2              fanState[3] = 0;
  33   2          } else if (temp >= 2) {
  34   2              fanLevel = 1;
  35   2              fanState[0] = 1;
  36   2              fanState[1] = 1;
  37   2              fanState[2] = 0;
  38   2              fanState[3] = 0;
  39   2          } else {
  40   2              fanLevel = 0;
  41   2              fanState[0] = 0;
  42   2              fanState[1] = 0;
  43   2              fanState[2] = 0;
  44   2              fanState[3] = 0;
  45   2          }
  46   1      
  47   1          // 显示
  48   1          putStringOnLCD1602(0, 0, firstLine);
  49   1          putStringOnLCD1602(1, 0, secondLine);
  50   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    285    ----
C51 COMPILER V9.01   MAINSCREEN                                                            12/06/2023 12:06:33 PAGE 2   

   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
