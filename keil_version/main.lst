C51 COMPILER V9.01   MAIN                                                                  12/05/2023 20:33:23 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.obj
COMPILER INVOKED BY: D:\Program Files\Keil\C51\BIN\C51.EXE src\main.c ROM(COMPACT) BROWSE DEBUG OBJECTEXTEND PRINT(.\mai
                    -n.lst) OBJECT(main.obj)

line level    source

   1          /**
   2           * CPU: AT89C52
   3           * FREQ: 12.0000 MHz
   4           * XTAL: 12.0000 MHz
   5           * AUTHOR: Wenjun Chen
   6           * DATE: 2023-11-30
   7          */
   8          
   9          #include <reg52.h>
  10          #include <stdio.h>
  11          #include "./utils/delay.h"
  12          #include "./utils/FUNCTIONS.h"
  13          #include "./utils/LCD1602.h"
  14          #include "./utils/AT24C02.h"
  15          #include "./utils/DS18B20.h"
  16          #include "./utils/FAN_PWM.h"
  17          #include "./utils/BEEP.h"
  18          
  19          #include "./screens/startupScreen.h"
  20          #include "./screens/alartScreen.h"
  21          #include "./screens/settingScreen.h"
  22          #include "./screens/mainScreen.h"
  23          
  24          // Òý½Å
  25          sbit SETTING_BUTTON = P3^7;
  26          sbit ADD_BUTTON = P3^6;
  27          sbit SUB_BUTTON = P3^5;
  28          sbit APPLY_BUTTON = P3^4;
  29          sbit RST_BUTTON = P3^3;
  30          sbit DEBUG_BUTTON = P3^2;
  31          sbit BEEP = P1^4;
  32          sbit LED = P2^0;
  33          sbit FAN = P2^7;
  34          
  35          // È«¾Ö±äÁ¿
  36          int TH_INIT = 0x8E; // ¶¨Ê±Æ÷³õÖµ
  37          int TL_INIT = 0x8E; // ¶¨Ê±Æ÷³õÖµ
  38          unsigned char fanLevel = 0; // ·çÉÈµµÎ»£¬0µµ: 0%×ªËÙ£¬1µµ: 50%×ªËÙ, 2µµ: 75%×ªËÙ, 3µµ: 100%×ªËÙ
  39          unsigned char fanState[4] = {0, 0, 0, 0}; // ÓÃÓÚ¿ØÖÆ·çÉÈ×ªËÙ£¨0: ¹Ø±Õ, 1: ´ò¿ª£©
  40          float currentTemperature = 0.0; // µ±Ç°ÎÂ¶È
  41          int highestTemperature = 0; // ×î¸ßÎÂ¶È
  42          int lowestTemperature = 0; // ×îµÍÎÂ¶È
  43          xdata unsigned char firstLine[] = {'H', ':', 'x', 'x', 'x', '?', 'C', ' ', ' ', 'L', ':', 'x', 'x', 'x', '
             -?', 'C', '\0'};
  44          xdata unsigned char secondLine[] = {'T', ':', 'x', 'x', 'x', '.', 'x', '?', 'C', ' ', ' ', 'F', 'A', 'N', 
             -':', 'x', '\0'};
  45          xdata unsigned char *onScreenHighestTemperature = &firstLine[2]; // ÆÁÄ»ÉÏÏÔÊ¾µÄ×î¸ßÎÂ¶ÈÖ¸Õë, Õ¼ÓÃ 3 ¸ö×Ö½
             -Ú
  46          xdata unsigned char *onScreenLowestTemperature = &firstLine[11]; // ÆÁÄ»ÉÏÏÔÊ¾µÄ×îµÍÎÂ¶ÈÖ¸Õë, Õ¼ÓÃ 3 ¸ö×Ö½
             -Ú
  47          xdata unsigned char *onScreenCurrentTemperature = &secondLine[2]; // ÆÁÄ»ÉÏÏÔÊ¾µÄµ±Ç°ÎÂ¶ÈÖ¸Õë, Õ¼ÓÃ 7 ¸ö×Ö
             -½Ú
  48          xdata unsigned char *onScreenFanLevel = &secondLine[15]; // ÆÁÄ»ÉÏÏÔÊ¾µÄ·çÉÈµµÎ»Ö¸Õë, Õ¼ÓÃ 1 ¸ö×Ö½Ú
  49          
C51 COMPILER V9.01   MAIN                                                                  12/05/2023 20:33:23 PAGE 2   

  50          
  51          void main() {
  52   1          
  53   1              initializeEverything();
  54   1          startupScreen();
  55   1          alartScreen("Starting...");
  56   1      
  57   1          while (1) {
  58   2              
  59   2              // Èç¹û°´ÏÂ¸´Î»¼ü£¬½«×î¸ß/×îµÍÎÂ¶È»Ö¸´ÎªÄ¬ÈÏÖµ
  60   2              if (!RST_BUTTON) {
  61   3                  while (!RST_BUTTON);    // µÈ´ý°´¼üÊÍ·Å
  62   3                  alartScreen("Resetting...");
  63   3                  writeAT24C02(0x00, (unsigned char)(22));
  64   3                  writeAT24C02(0x01, (unsigned char)(20));
  65   3              }
  66   2      
  67   2              // Èç¹û°´ÏÂµ÷ÊÔ¼ü
  68   2              if (!DEBUG_BUTTON) {
  69   3                  while (!DEBUG_BUTTON);    // µÈ´ý°´¼üÊÍ·Å
  70   3                  alartScreen("Debugging...");
  71   3                  initializeBeeper();
  72   3                  doBeep();
  73   3              }
  74   2      
  75   2              // Èç¹û°´ÏÂÉèÖÃ¼ü£¬Ìø×ªµ½ÉèÖÃ½çÃæ
  76   2              if (!SETTING_BUTTON) {
  77   3                  while (!SETTING_BUTTON);    // µÈ´ý°´¼üÊÍ·Å
  78   3                  settingScreen();
  79   3              }
  80   2      
  81   2              // ÏÔÊ¾Ö÷ÆÁÄ»
  82   2              mainScreen();
  83   2      
  84   2              // ÑÓÊ± 100ms
  85   2              // delayOneMillisecond(100);
  86   2          }
  87   1      }
  88          
  89          
  90          
  91          
  92          
  93          
  94          
  95          
  96          
  97          
  98          
  99          
 100          
 101          
 102          
 103          
 104          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     79    ----
   CONSTANT SIZE    =     38    ----
   XDATA SIZE       =     46    ----
   PDATA SIZE       =   ----    ----
C51 COMPILER V9.01   MAIN                                                                  12/05/2023 20:33:23 PAGE 3   

   DATA SIZE        =     17    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
