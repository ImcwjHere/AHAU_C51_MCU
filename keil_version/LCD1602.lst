C51 COMPILER V9.01   LCD1602                                                               12/05/2023 20:20:08 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN LCD1602.obj
COMPILER INVOKED BY: D:\Program Files\Keil\C51\BIN\C51.EXE src\utils\LCD1602.c ROM(COMPACT) BROWSE DEBUG OBJECTEXTEND PR
                    -INT(.\LCD1602.lst) OBJECT(LCD1602.obj)

line level    source

   1          #include "LCD1602.h"
   2          
   3          #define LCD1602_DATAPINS P0
   4          
   5          sbit LCD1602_E =  P1^2;
   6          sbit LCD1602_RW = P1^1;
   7          sbit LCD1602_RS = P1^0;
   8          
   9          // 向LCD写入一个字节
  10          void __writeComOnLCD1602(unsigned char com)     {       //写入命令
  11   1              LCD1602_E = 0;  //使能
  12   1              LCD1602_RS = 0; //选择发送命令
  13   1              LCD1602_RW = 0; //选择写入
  14   1              
  15   1              LCD1602_DATAPINS = com; //放入命令
  16   1              Lcd1602_Delay1ms(1);    //等待数据稳定
  17   1      
  18   1              LCD1602_E = 1;  //写入时序
  19   1              Lcd1602_Delay1ms(5);    //保持时间
  20   1              LCD1602_E = 0;
  21   1      }
  22          
  23          // 向LCD写入一个字节的数据
  24          void __writeDataOnLCD1602(unsigned char dat) {  //写入数据
  25   1              LCD1602_E = 0;  //使能清零
  26   1              LCD1602_RS = 1; //选择输入数据
  27   1              LCD1602_RW = 0; //选择写入
  28   1      
  29   1              LCD1602_DATAPINS = dat; //写入数据
  30   1              Lcd1602_Delay1ms(1);
  31   1      
  32   1              LCD1602_E = 1;  //写入时序
  33   1              Lcd1602_Delay1ms(5);    //保持时间
  34   1              LCD1602_E = 0;
  35   1      }
  36          
  37          // 初始化LCD1602
  38          void initializeLCD1602(void) {  //LCD初始化子程序
  39   1              __writeComOnLCD1602(0x38);      //开显示
  40   1              __writeComOnLCD1602(0x0c);      //开显示不显示光标
  41   1              __writeComOnLCD1602(0x06);      //写一个指针加1
  42   1              __writeComOnLCD1602(0x01);      //清屏
  43   1              __writeComOnLCD1602(0x80);      //设置数据指针起点
  44   1      }
  45          
  46          // 清除第0或第1行的数据
  47          void clearLineInLCD1602(unsigned char row) {
  48   1          unsigned char i;
  49   1          __writeComOnLCD1602(((row & 1) << 6) | 0x80);
  50   1          for(i=0; i<LineLength; i++) __writeDataOnLCD1602(' ');
  51   1      }
  52          
  53          // 写一个字符
  54          // row: 行(0或1),  column: 第几个字符(0~15),  dat: 要写的字符.
C51 COMPILER V9.01   LCD1602                                                               12/05/2023 20:20:08 PAGE 2   

  55          void writeCharOnLCD1602(unsigned char row, unsigned char column, unsigned char dat) {
  56   1          __writeComOnLCD1602((((row & 1) << 6) + column) | 0x80);
  57   1          __writeDataOnLCD1602(dat);
  58   1      }
  59          
  60          // 写一个字符串
  61          // row: 行(0或1),  column: 第几个字符(0~15),  puts: 要写的字符串指针.
  62          void putStringOnLCD1602(unsigned char row, unsigned char column, unsigned char *puts) {
  63   1          __writeComOnLCD1602((((row & 1) << 6) + column) | 0x80);
  64   1          for (; *puts != 0; puts++) {        //遇到停止符0结束
  65   2              __writeDataOnLCD1602(*puts);
  66   2              if(++column >= LineLength) break;
  67   2          }
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    192    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
